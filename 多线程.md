# 多线程

## 为什么需要多线程

- cpu 3Ghz 限制原因是发热量，想要发展出现了多核
- jvm 默认给你发一个线程，使得操作会更自然，但是会有性能问题

## 线程

- 主线程向下执行，达到new Thread start 时开启新线程，主线程继续向下执行
- start 开启新线程，主线程继续执行，run开启新线程，主线程等待线程执行完成后再继续进行
- 线程栈是私有的，局部变量是私有的， 类变量，静态变量都是公有的

- 多线程由于cpu切换速度快所以感觉是同时执行的，但是其实是线程之前疯狂切换，可能会导致同时操作中，共享变量的值在一个方法中改变了，但是当前进程被停止，然后其他进行进行操作又对这个进行了操作，然后又切换回了，但是你这个进程的变量已经不知道经过几次修改，导致你这个结果就会出现异常

## 多线程使用场景

- IO 密集型
  - stream
    1.  File 
    2.  网络（数据库）
- CPU 密集型，多线程提升有限
- 性能上线 
  1. 单核百分百
  2. 多核*n
- 本质上还是cpu速度太快了，为了让性能不浪费（不让cpu闲着）